(function(e){var t={};function a(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,a);o.l=true;return o.exports}a.m=e;a.c=t;a.d=function(e,t,n){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(e,t){if(t&1)e=a(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);a.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n};a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=44)})({0:function(e,t){e.exports=jQuery},1:function(e,t){e.exports=Vue},4:function(e,t,a){const n=a(0);function o(){var e=Math.floor(Math.random()*256);var t=Math.floor(Math.random()*256);var a=Math.floor(Math.random()*256);return"rgb("+e+","+t+","+a+")"}e.exports={Duan(e){var t={color:"",duan:"",level:0};if(e>=8e3)t.duan="王者";else if(e>=4500)t.duan="大师";else if(e>=4240){t.duan="钻石";t.level=5}else if(e>=3980){t.duan="钻石";t.level=4}else if(e>=3720){t.duan="钻石";t.level=3}else if(e>=3460){t.duan="钻石";t.level=2}else if(e>=3200){t.duan="钻石";t.level=1}else if(e>=3100){t.duan="铂金";t.level=5}else if(e>=3e3){t.duan="铂金";t.level=4}else if(e>=2900){t.duan="铂金";t.level=3}else if(e>=2800){t.duan="铂金";t.level=2}else if(e>=2700){t.duan="铂金";t.level=1}else if(e>=2600){t.duan="黄金";t.level=5}else if(e>=2500){t.duan="黄金";t.level=4}else if(e>=2400){t.duan="黄金";t.level=3}else if(e>=2300){t.duan="黄金";t.level=2}else if(e>=2200){t.duan="黄金";t.level=1}else if(e>=2060){t.duan="白银";t.level=5}else if(e>=1920){t.duan="白银";t.level=4}else if(e>=1780){t.duan="白银";t.level=3}else if(e>=1640){t.duan="白银";t.level=2}else if(e>=1500){t.duan="白银";t.level=1}else if(e>=1e3){t.duan="青铜"}else t.duan="仿生人";if(e>=8e3)t.color="rgba(255,0,0,0.8)";else if(e>=4500)t.color="rgba(25,212,209,0.8)";else if(e>=3200)t.color="rgba(138,43,226,0.8)";else if(e>=2700)t.color="rgba(40,169,250,0.8)";else if(e>=2200)t.color="rgba(248,228,0,0.8)";else if(e>=1500)t.color="rgba(107,133,173,0.8)";else t.color="rgba(255,158,0,0.8)";return t},maskShow(e,t=0){n(".mask").fadeIn(300);n(".mask .content").text(e);if(t){setTimeout(()=>{n(".mask").fadeOut(300)},1500)}return e},timeFormat(e){let t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=e.getHours(),r=e.getMinutes(),l=e.getSeconds();return`${t}年${a}月${n} ${o}:${r}:${l}`},drawVCode(e="vCode"){let t=[];var a=n("#"+e).width();var r=n("#"+e).height();var l=document.getElementById(e);var i=l.getContext("2d");l.width=a;l.height=r;var s="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0";var u=s.split(",");var f=u.length;for(var d=0;d<=3;d++){var m=Math.floor(Math.random()*f);var h=Math.random()*30*Math.PI/180;var g=u[m];t[d]=g.toLowerCase();let e=a/20*5;var c=10+d*e;var v=20+Math.random()*15;i.font="bold 30px 微软雅黑";i.translate(c,v);i.rotate(h);i.fillStyle=o();i.fillText(g,0,0);i.rotate(-h);i.translate(-c,-v)}for(var d=0;d<=5;d++){i.strokeStyle=o();i.beginPath();i.moveTo(Math.random()*a,Math.random()*r);i.lineTo(Math.random()*a,Math.random()*r);i.stroke()}for(var d=0;d<=30;d++){i.strokeStyle=o();i.beginPath();var c=Math.random()*a;var v=Math.random()*r;i.moveTo(c,v);i.lineTo(c+1,v+1);i.stroke()}return t.join("")},getQueryVariable(e){var t=window.location.search.substring(1);var a=t.split("&");for(var n=0;n<a.length;n++){var o=a[n].split("=");if(o[0]==e){return o[1]}}return false}}},44:function(e,t,a){"use strict";a.r(t);var n=a(45);var o=a.n(n);var r=a(1);var l=a.n(r);var i=a(0);var s=a.n(i);var u=a(4);var f=a.n(u);const d=new l.a({el:"#nav",data(){return{USERINFOAPI:"/data/api/user_info",ROLEINFOAPI:"https://300zb.rcywl.com/api/getrole?name=",USERINFOUPDATEINFO:"/number/api/game_account_up",ELOUPDATEAPI:"/number/api/game_account_elo_up",LOGINOUTAPI:"/number/login_exit",userData:{account:"",password:""},vCode:"",vCodeArr:"",userState:0,roleState:-1,userInfo:null,gameInfo:null,roleInfo:null,ELO:"",duan:"",ELOUpdateMsg:"刷新团分",roleInfoList:[{name:"今日助攻",key:"dayKill"},{name:"今日杀敌",key:"dayAssist"},{name:"今日竞技场胜场",key:"dayBattleWin"},{name:"今日战场胜场",key:"dayArenaWin"},{name:"本周助攻",key:"weekAssist"},{name:"本周杀敌",key:"weekKill"},{name:"本周胜场",key:"weekBattleWin"}],matchList:null,navIndex:0,navList:[{name:"首页",link:"/"},{name:"英雄",link:"/hero_list.html"},{name:"装备",link:"/item/all_list.html"},{name:"皮肤",link:"/skin_list.html"},{name:"文章",link:"/article_list.html"}]}},computed:{winP(){if(this.roleInfo){return(this.roleInfo.WinCount/this.roleInfo.MatchCount*100).toFixed(1)+"%"}else{return""}}},methods:{init(){this.getUserInfo();this.navIndex=s()("#navIndex").text()},get(e,t){s.a.ajax({type:"get",dataType:"json",url:e,crossDomain:true,xhrFields:{withCredentials:true},success:t,error:function(){f.a.maskShow("请求失败",1)}})},getDuan(){this.duan=f.a.Duan(this.ELO)},loginOut(){s.a.post(this.LOGINOUTAPI,e=>{location.reload()},"json")},roleUpdate(){s.a.post(this.USERINFOUPDATEINFO,{id:d.gameInfo.id},e=>{f.a.maskShow(e.msg.info,1);if(e.state){d.getUserInfo()}},"json")},eloUpdateClick(){if(this.ELOUpdateMsg=="查询中"||new Date-new Date(this.gameInfo.elouptime*1e3)<300*1e3){f.a.maskShow("更新团分技能冷却中",1);return}this.ELOUpdateMsg="查询中";d.getELO(d.gameInfo.rolename).then(()=>{return d.getMatch(0)}).then(e=>{d.getDuan();return d.eloUpdate(e)}).then(()=>{f.a.maskShow("团分已更新",1);d.gameInfo.elouptime=(new Date).getTime()/1e3}).catch(()=>{f.a.maskShow("更新团分失败",1);d.ELOUpdateMsg="更新团分"})},eloUpdate(e){return new Promise((t,a)=>{s.a.post(this.ELOUPDATEAPI,{rolename:this.gameInfo.rolename,elo:e},e=>{d.ELOUpdateMsg="更新团分";t()},"json")})},getELO(e){return new Promise((t,a)=>{this.get("https://300zb.rcywl.com/api/getlist?name="+e,e=>{if(e.Result=="OK"){if(!e.List.length)return;d.matchList=e.List;t()}else a()})})},getMatch(e){return new Promise((t,a)=>{this.get("https://300zb.rcywl.com/api/getmatch?id="+this.matchList[e].MatchID,e=>{let n=d.getRoleData(e.Match);if(n){d.ELO=n.ELO;t(n.ELO)}else{a()}})})},getRoleInfo(e){this.get(this.ROLEINFOAPI+e,e=>{if(e.Result=="OK"){d.roleInfo=e.Role;d.gameInfo.UpdateTime=e.Role.UpdateTime}})},getRoleData(e){let t=this;const a=e;let n=a.WinSide.concat(a.LoseSide);for(let e=0;e<n.length;e++){const a=n[e];if(a.RoleName==t.gameInfo.rolename){return a}}return null},getUserInfo(){s.a.post(this.USERINFOAPI,e=>{if(e.state){d.userState=1;d.userInfo=e.msg.data.userinfo;d.roleState=e.msg.data.gameinfo.code;if(e.msg.data.gameinfo.state){d.gameInfo=e.msg.data.gameinfo.data;d.gameInfo.lastlogintime;d.gameInfo.UpdateTime="";d.getRoleInfo(d.gameInfo.rolename);if(!d.gameInfo.elo){d.getELO(d.gameInfo.rolename).then(()=>{return d.getMatch(0)}).then(e=>{d.eloUpdate(e);d.getDuan()})}else{d.ELO=d.gameInfo.elo;d.getDuan()}}}},"json")},vCodeSwitch(){this.vCodeArr=f.a.drawVCode("vCode")},submit(){let e=this,t=true;for(let e in this.userData){if(this.userData[e]=="")t=false}if(!t){f.a.maskShow("请将账号信息输入完整",1);return false}if(this.vCode.toLowerCase()!=this.vCodeArr.toLowerCase()){f.a.maskShow("验证码错误",1);return false}f.a.maskShow("加载中 ···");try{s.a.post("/user/api/login",e.userData,t=>{t=JSON.parse(t);s()(".mask .content").text(t.msg.info);e.vCodeSwitch();if(t.state=="0"){setTimeout(()=>{s()(".mask").fadeOut(300)},1e3)}else{setTimeout(()=>{location.reload()},1e3)}})}catch(e){console.log(e);f.a.maskShow("登陆失败，请联系管理员",1)}}}});s()("#loginModal").on("shown.bs.modal",function(){d.vCodeSwitch()});d.init()},45:function(e,t,a){}});